import React, { useState } from 'react';
import {
  Box,
  Button,
  Link,
  Flex,
  Spacer,
  IconButton,
  useColorMode,
  useColorModeValue,
  useMediaQuery,
} from '@chakra-ui/react';
import { MoonIcon, SunIcon } from '@chakra-ui/icons';
import { FaAlignJustify } from 'react-icons/fa';
import { Icon } from '@chakra-ui/react';
import { useNavigate } from "react-router-dom";

const Nav = ({ onOpen, ref }) => {
  const [scroll, setScroll] = useState(false);
  const { colorMode, toggleColorMode } = useColorMode();
  const navBg = useColorModeValue('white', 'blackAlpha.200');
  const [isLargerThanMD] = useMediaQuery('(min-width: 48em)');
  const navigate = useNavigate();

  const changeScroll = () =>
    document.body.scrollTop > 80 || document.documentElement.scrollTop > 80
      ? setScroll(true)
      : setScroll(false);

  window.addEventListener('scroll', changeScroll);
  if (colorMode == 'light') {
    toggleColorMode();
  }

  return (
    <Flex
      h="10vh"      
      alignItems="center"
      p="6"
      boxShadow={scroll ? 'base' : 'none'}
      position="sticky"
      // top="0"
      zIndex="sticky"
      w="full"
      bg={navBg}
    >
      <Box w="5%" />
      <Link href="/">
        <svg width="200.9227661132813" height="55.80471053644519" viewBox="0 0 369.89473684210526 92.10526315789473" class="css-1j8o68f"><defs id="SvgjsDefs1540"></defs><g id="SvgjsG1541" featurekey="4K7G0D-0" transform="matrix(29.389045410009267,0,0,29.389045410009267,-27.419981946075804,-27.419981946075804)" fill="#90cdf4"><title xmlns="http://www.w3.org/2000/svg">maze</title><g xmlns="http://www.w3.org/2000/svg"><polygon points="2.77 1.478 3.325 1.478 3.325 1.285 2.964 1.285 2.964 0.933 2.395 0.933 2.395 1.126 2.77 1.126 2.77 1.478"></polygon><polygon points="2.396 1.93 2.59 1.93 2.59 1.361 2.237 1.361 2.237 1 2.044 1 2.044 1.555 2.396 1.555 2.396 1.93"></polygon><polygon points="3.164 2.205 3.358 2.205 3.358 1.845 3.71 1.845 3.71 1.276 3.516 1.276 3.516 1.651 3.164 1.651 3.164 2.205"></polygon><polygon points="2.763 2.059 2.413 2.059 2.403 2.498 2.597 2.502 2.603 2.253 2.957 2.253 2.957 1.684 2.763 1.684 2.763 2.059"></polygon><polygon points="4.067 2.395 3.874 2.395 3.874 2.77 3.522 2.77 3.522 3.325 3.715 3.325 3.715 2.964 4.067 2.964 4.067 2.395"></polygon><polygon points="3.513 2.396 3.07 2.396 3.07 2.59 3.707 2.59 3.707 2.237 4 2.237 4 2.044 3.513 2.044 3.513 2.396"></polygon><polygon points="3.724 3.71 3.724 3.516 3.349 3.516 3.349 3.083 2.795 3.083 2.795 3.277 3.155 3.277 3.155 3.71 3.724 3.71"></polygon><polygon points="2.747 2.503 2.747 2.942 3.316 2.942 3.316 2.748 2.941 2.748 2.941 2.503 2.747 2.503"></polygon><polygon points="2.605 4.067 2.605 3.874 2.23 3.874 2.23 3.522 1.675 3.522 1.675 3.715 2.036 3.715 2.036 4.067 2.605 4.067"></polygon><polygon points="2.956 4 2.956 3.445 2.604 3.445 2.604 3.07 2.41 3.07 2.41 3.639 2.763 3.639 2.763 4 2.956 4"></polygon><polygon points="1.484 3.349 1.836 3.349 1.836 2.795 1.642 2.795 1.642 3.155 1.29 3.155 1.29 3.724 1.484 3.724 1.484 3.349"></polygon><polygon points="2.043 3.316 2.237 3.316 2.237 2.876 2.6 2.876 2.6 2.682 2.043 2.682 2.043 3.316"></polygon><polygon points="1.126 2.23 1.497 2.23 1.497 1.675 1.304 1.675 1.304 2.036 0.933 2.036 0.933 2.605 1.126 2.605 1.126 2.23"></polygon><polygon points="1.304 2.763 1 2.763 1 2.956 1.497 2.956 1.497 2.604 1.93 2.604 1.93 2.41 1.304 2.41 1.304 2.763"></polygon><polygon points="1.651 1.909 2.205 1.909 2.205 1.716 1.845 1.716 1.845 1.29 1.276 1.29 1.276 1.484 1.651 1.484 1.651 1.909"></polygon><polygon points="1.684 2.237 2.059 2.237 2.059 2.492 2.253 2.492 2.253 2.043 1.684 2.043 1.684 2.237"></polygon></g></g><g id="SvgjsG1542" featurekey="wPuqcM-0" transform="matrix(3.459816657828662,0,0,3.459816657828662,108.88616632776952,0.9330594251478175)" fill="#90cdf4"><path d="M12.96 18.5 c-1.24 1.12 -2.9 1.7 -4.76 1.7 c-3.92 0 -7.3 -2.94 -7.3 -7.2 s3.38 -7.2 7.3 -7.2 c1.84 0 3.48 0.6 4.68 1.66 l-1.76 1.98 c-0.74 -0.52 -1.74 -0.9 -2.76 -0.9 c-2.52 0 -4.42 1.86 -4.42 4.46 s1.9 4.46 4.42 4.46 c1.06 0 2.1 -0.4 2.86 -1 z M20.88 9.44 c1.98 0 3.94 1.3 3.94 4.58 l0 5.98 l-2.86 0 l0 -5.78 c0 -1.7 -0.66 -2.28 -1.76 -2.28 c-1.52 0 -2.42 1.44 -2.64 2.16 l0 5.9 l-2.86 0 l0 -14.14 l2.86 0 l0 5.66 c0.2 -0.54 1.32 -2.08 3.32 -2.08 z M34.44 9.6 l2.86 0 l0 10.4 l-2.86 0 l0 -1.28 c-0.06 0.42 -1.08 1.48 -2.88 1.48 c-2.38 0 -5.14 -1.72 -5.14 -5.42 c0 -3.58 2.76 -5.36 5.14 -5.36 c1.8 0 2.82 1.12 2.88 1.34 l0 -1.16 z M31.96 17.66 c1.4 0 2.62 -0.96 2.62 -2.88 c0 -1.86 -1.22 -2.82 -2.62 -2.82 c-1.44 0 -2.76 0.98 -2.76 2.82 c0 1.9 1.32 2.88 2.76 2.88 z M45.84 9.44 c0.26 0 0.5 0 0.76 0.06 l0 2.74 c-0.24 -0.06 -0.48 -0.06 -0.68 -0.06 c-1.92 0 -3.5 1.38 -3.68 3.38 l0 4.44 l-2.86 0 l0 -10.4 l2.86 0 l0 2.6 c0.46 -1.58 1.72 -2.76 3.6 -2.76 z M53.18000000000001 17.6 c0.54 0 0.94 -0.06 1.38 -0.22 l0 2.4 c-0.44 0.2 -1.12 0.34 -2.12 0.34 c-1.62 0 -2.98 -0.56 -2.98 -3.5 l0 -4.66 l-1.46 0 l0 -2.36 l1.46 0 l0 -2.44 l2.86 0 l0 2.44 l2.22 0 l0 2.36 l-2.22 0 l0 4.64 c0 0.48 0.14 1 0.86 1 z M61.400000000000006 9.42 c2.36 0 5.62 1.78 5 6.38 l-7.56 0 c0.36 1.3 1.44 1.98 2.84 1.98 c1.3 0 1.8 -0.3 2.54 -0.7 l1.58 1.54 c-0.9 0.94 -2.18 1.58 -4.22 1.58 c-2.6 0 -5.64 -1.78 -5.64 -5.36 c0 -3.64 3.1 -5.42 5.46 -5.42 z M61.400000000000006 11.86 c-1.04 0 -2.14 0.64 -2.52 1.92 l5 0 c-0.32 -1.28 -1.46 -1.92 -2.48 -1.92 z M74.68 9.44 c0.26 0 0.5 0 0.76 0.06 l0 2.74 c-0.24 -0.06 -0.48 -0.06 -0.68 -0.06 c-1.92 0 -3.5 1.38 -3.68 3.38 l0 4.44 l-2.86 0 l0 -10.4 l2.86 0 l0 2.6 c0.46 -1.58 1.72 -2.76 3.6 -2.76 z"></path></g></svg>
      </Link>

      {/* <Text fontSize="xl" fontWeight="bold">
        Charter
      </Text> */}

      <Spacer />
      
      <Flex alignItems="center">
        {/* <IconButton mr="10" w={6} h={6} p={5} onClick={toggleColorMode}>
          {colorMode === 'light' ? <MoonIcon /> : <SunIcon />}
        </IconButton> */}

        {isLargerThanMD ? (
          <>
          <Box pr={5}>
            <Link href="https://discord.gg/D4pB3ydEeh">
            <svg
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
                fill="#90CDF4"
                stroke="#90CDF4"
                width={25}
                height={25}
                
              >
                <title>{"discord_fill"}</title>
                <g stroke="none" fill="none" fillRule="evenodd">
                  <path d="M24 0v24H0V0h24ZM12.593 23.258l-.011.002-.071.035-.02.004-.014-.004-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01-.017.428.005.02.01.013.104.074.015.004.012-.004.104-.074.012-.016.004-.017-.017-.427c-.002-.01-.009-.017-.017-.018Zm.265-.113-.013.002-.185.093-.01.01-.003.011.018.43.005.012.008.007.201.093c.012.004.023 0 .029-.008l.004-.014-.034-.614c-.003-.012-.01-.02-.02-.022Zm-.715.002a.023.023 0 0 0-.027.006l-.006.014-.034.614c0 .012.007.02.017.024l.015-.002.201-.093.01-.008.004-.011.017-.43-.003-.012-.01-.01-.184-.092Z" />
                  <path
                    d="M15.003 4c.744 0 1.53.26 2.25.547l.527.216c1.26.528 1.968 1.636 2.517 2.853.891 1.975 1.51 4.608 1.724 6.61.102.95.127 1.906-.056 2.549-.197.687-.867 1.173-1.518 1.555l-.322.183-.334.186c-.172.096-.349.191-.525.284l-.522.27-.717.357-.577.284a1 1 0 1 1-.894-1.788l.79-.39-.58-.609c-1.39.57-3.027.893-4.766.893-1.739 0-3.376-.322-4.766-.893l-.58.608.793.39a1 1 0 1 1-.894 1.79l-.544-.27c-.402-.2-.805-.398-1.203-.607l-.928-.505-.321-.183c-.651-.382-1.322-.868-1.518-1.555-.184-.643-.158-1.598-.057-2.55.214-2.001.833-4.634 1.724-6.609.549-1.217 1.257-2.325 2.517-2.853C7.059 4.413 8.072 4 9 4c.603 0 1.077.555.99 1.147A13.65 13.65 0 0 1 12 5c.691 0 1.366.05 2.014.148A1.012 1.012 0 0 1 15.004 4ZM8.75 10.5a1.75 1.75 0 1 0 0 3.5 1.75 1.75 0 0 0 0-3.5Zm6.5 0a1.75 1.75 0 1 0 0 3.5 1.75 1.75 0 0 0 0-3.5Z"
                    fill="#90CDF4"
                  />
                </g>
              </svg>  
              </Link>
            </Box>        
            <Button colorScheme='blue' variant="outline" minWidth='100px' onClick={()=>{navigate("/chat");}}>{"  AI Chat  "}</Button>
            {/* <a target="_blank" rel="noreferrer" href="https://appseed.us/apps/react/" fontSize="md" mr="10">
              More Apps
            </a> */}
          </>
        ) : (
          <IconButton ref={ref} onClick={onOpen}>
            <Icon as={FaAlignJustify} />
          </IconButton>
        )}

      </Flex>
      <Box w="5%" />

    </Flex>
  );
};

export default Nav;